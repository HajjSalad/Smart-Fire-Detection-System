\doxysection{main/gpio\+\_\+interrupt.c File Reference}
\hypertarget{gpio__interrupt_8c}{}\label{gpio__interrupt_8c}\index{main/gpio\_interrupt.c@{main/gpio\_interrupt.c}}


GPIO interrupt handling for sensor input signal detection.  


{\ttfamily \#include "{}spi.\+h"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include "{}freertos/\+Free\+RTOS.\+h"{}}\newline
{\ttfamily \#include "{}freertos/task.\+h"{}}\newline
{\ttfamily \#include "{}freertos/semphr.\+h"{}}\newline
{\ttfamily \#include "{}driver/spi\+\_\+master.\+h"{}}\newline
{\ttfamily \#include "{}driver/gpio.\+h"{}}\newline
{\ttfamily \#include "{}sdkconfig.\+h"{}}\newline
{\ttfamily \#include "{}esp\+\_\+log.\+h"{}}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{gpio__interrupt_8c_a7f68491b3934198dc304aae7c32631ff}{INTERRUPT\+\_\+\+LINE}}~22
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void IRAM\+\_\+\+ATTR \mbox{\hyperlink{gpio__interrupt_8c_a1c30a5d4e3dd67909762dcf3f379aeed}{sensor\+\_\+isr\+\_\+handler}} (void \texorpdfstring{$\ast$}{*}arg)
\begin{DoxyCompactList}\small\item\em ISR handler for the GPIO interrupt triggered by the sensor. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{gpio__interrupt_8c_ac0cf1f31f06c91a089791c1174f7fb82}{interrupt\+\_\+line\+\_\+init}} ()
\begin{DoxyCompactList}\small\item\em Initialize the interrupt line GPIO pin and configure ISR. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
Task\+Handle\+\_\+t \mbox{\hyperlink{gpio__interrupt_8c_aea550bf013f137f3f7657fc77b1535f6}{spi\+\_\+task\+\_\+handle}}
\begin{DoxyCompactList}\small\item\em Handle to the SPI task. \end{DoxyCompactList}\item 
volatile int \mbox{\hyperlink{gpio__interrupt_8c_af6eb8fe838ab55f6f4435358c1d3fe8b}{flag\+Request}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
GPIO interrupt handling for sensor input signal detection. 

This module configures a GPIO pin to trigger an interrupt on a positive edge, notifying a Free\+RTOS task to handle the event. 

\label{doc-define-members}
\Hypertarget{gpio__interrupt_8c_doc-define-members}
\doxysubsection{Macro Definition Documentation}
\Hypertarget{gpio__interrupt_8c_a7f68491b3934198dc304aae7c32631ff}\index{gpio\_interrupt.c@{gpio\_interrupt.c}!INTERRUPT\_LINE@{INTERRUPT\_LINE}}
\index{INTERRUPT\_LINE@{INTERRUPT\_LINE}!gpio\_interrupt.c@{gpio\_interrupt.c}}
\doxysubsubsection{\texorpdfstring{INTERRUPT\_LINE}{INTERRUPT\_LINE}}
{\footnotesize\ttfamily \label{gpio__interrupt_8c_a7f68491b3934198dc304aae7c32631ff} 
\#define INTERRUPT\+\_\+\+LINE~22}

GPIO pin number used for the interrupt line 

\label{doc-func-members}
\Hypertarget{gpio__interrupt_8c_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{gpio__interrupt_8c_ac0cf1f31f06c91a089791c1174f7fb82}\index{gpio\_interrupt.c@{gpio\_interrupt.c}!interrupt\_line\_init@{interrupt\_line\_init}}
\index{interrupt\_line\_init@{interrupt\_line\_init}!gpio\_interrupt.c@{gpio\_interrupt.c}}
\doxysubsubsection{\texorpdfstring{interrupt\_line\_init()}{interrupt\_line\_init()}}
{\footnotesize\ttfamily \label{gpio__interrupt_8c_ac0cf1f31f06c91a089791c1174f7fb82} 
void interrupt\+\_\+line\+\_\+init (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}



Initialize the interrupt line GPIO pin and configure ISR. 

Initialize GPIO interrupt line and ISR handler.

Sets up the GPIO pin as input with pull-\/up enabled and configures it to trigger interrupts on the positive edge. Registers the ISR handler to the interrupt line. \Hypertarget{gpio__interrupt_8c_a1c30a5d4e3dd67909762dcf3f379aeed}\index{gpio\_interrupt.c@{gpio\_interrupt.c}!sensor\_isr\_handler@{sensor\_isr\_handler}}
\index{sensor\_isr\_handler@{sensor\_isr\_handler}!gpio\_interrupt.c@{gpio\_interrupt.c}}
\doxysubsubsection{\texorpdfstring{sensor\_isr\_handler()}{sensor\_isr\_handler()}}
{\footnotesize\ttfamily \label{gpio__interrupt_8c_a1c30a5d4e3dd67909762dcf3f379aeed} 
void IRAM\+\_\+\+ATTR sensor\+\_\+isr\+\_\+handler (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}}]{arg}{}\end{DoxyParamCaption})}



ISR handler for the GPIO interrupt triggered by the sensor. 

This handler notifies the spi\+\_\+task\+\_\+handle task from the ISR and yields if a higher priority task was woken.


\begin{DoxyParams}{Parameters}
{\em arg} & Pointer to user data. \\
\hline
\end{DoxyParams}


\label{doc-var-members}
\Hypertarget{gpio__interrupt_8c_doc-var-members}
\doxysubsection{Variable Documentation}
\Hypertarget{gpio__interrupt_8c_af6eb8fe838ab55f6f4435358c1d3fe8b}\index{gpio\_interrupt.c@{gpio\_interrupt.c}!flagRequest@{flagRequest}}
\index{flagRequest@{flagRequest}!gpio\_interrupt.c@{gpio\_interrupt.c}}
\doxysubsubsection{\texorpdfstring{flagRequest}{flagRequest}}
{\footnotesize\ttfamily \label{gpio__interrupt_8c_af6eb8fe838ab55f6f4435358c1d3fe8b} 
volatile int flag\+Request = 0}

Flag indicating an interrupt request \Hypertarget{gpio__interrupt_8c_aea550bf013f137f3f7657fc77b1535f6}\index{gpio\_interrupt.c@{gpio\_interrupt.c}!spi\_task\_handle@{spi\_task\_handle}}
\index{spi\_task\_handle@{spi\_task\_handle}!gpio\_interrupt.c@{gpio\_interrupt.c}}
\doxysubsubsection{\texorpdfstring{spi\_task\_handle}{spi\_task\_handle}}
{\footnotesize\ttfamily \label{gpio__interrupt_8c_aea550bf013f137f3f7657fc77b1535f6} 
Task\+Handle\+\_\+t spi\+\_\+task\+\_\+handle\hspace{0.3cm}{\ttfamily [extern]}}



Handle to the SPI task. 

Handle of the task to notify on interrupt 